TINYeditor=function(t){window[t.varible||"editor"]=this;var e={bold:["Bold","a","bold","bold"],italic:["Italic","a","italic","italic"],ol:["Numbered List","a","insertorderedlist","list-ol"],ul:["Bulleted List","a","insertunorderedlist","list-ul"],link:["Link","i","createlink","link","Enter link address:","http://"]};return this.post=function(){return this.e.body.innerHTML},this.action=function(t){this.e.execCommand(t[2],0,null)},this.insert=function(t){var e=prompt(t[4],t[5]);e&&this.action(t)},this.createEl=function(t,e,i){var i=i||[],n=document.createElement(t);if(e){n.className=e.className||e;for(key in e)n[key]=e[key]}for(var s=0;s<i.length;s++)n.appendChild(i[s]);return n},this.edit=function(){this.el=document.getElementById(t.id||"tinyEditor"),this.el.style.display="none",this.iframe=this.createEl("iframe",{frameBorder:0,width:t.width||"100%",height:t.height||"250"});var i=this.createEl("div","teheader",Object.keys(e).map(function(i){var n="a"==e[i][1]?"action":"insert";return this.createEl("div",{className:t.iclass||"tecontrol",title:e[i][0],onclick:this[n].bind(this,e[i]),innerHTML:'<i class="fa fa-fw fa-'+e[i][3]+'"></i>'})}.bind(this))),n=this.createEl("div","te",[i,this.iframe]);this.el.parentNode.insertBefore(n,this.el),this.iframeContent()},this.iframeContent=function(){var e="<html><head>",i=t.bodyid?' id="'+t.bodyid+'"':"";t.cssfile&&(e+='<link rel="stylesheet" href="'+t.cssfile+'" />'),t.css&&(e+='<style type="text/css">'+t.css+"</style>"),e+="</head><body"+i+">"+(t.content||this.el.value),e+="</body></html>",this.e=this.iframe.contentWindow.document,this.e.write(e),this.e.designMode="on",this.iframe.contentWindow.onkeyup=function(t){t.ctrlKey&&"Mac"==window.navigator.platform.slice(0,3)||((t.ctrlKey||t.metaKey)&&66==t.keyCode&&editor.action("bold"),71==t.keyCode&&editor.action("italic"))}},this.edit()};
